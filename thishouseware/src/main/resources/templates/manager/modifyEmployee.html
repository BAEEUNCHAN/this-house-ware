<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{common/layouts/default_layout}"
	layout:fragment="Content">
            <div class="row">
              <div class="col-md-12">
                <form class="card" th:object="${employee}">
                  <div class="card-header">
                    <div class="card-title">직원 수정</div>
                  </div>
                  <div class="card-body">
                    <div class="row">
                      <div class="col-md-8">
                        <div class="form-group">
                          <label for="email">이메일 변경</label>
                          <input type="text" class="form-control" th:field="*{email}">
                        </div>
                        <input type="hidden" name="imageLink" th:value="${employee.imageLink}">
                        <!-- inline -->
                        <div class="form-group">
                          <label for="name" class="col-md-3 col-form-label">이름 변경</label>
                          <input type="text" class="form-control input-full" th:field="*{name}">
                        </div>                        
                        <div class="form-group">
                          <label for="phone" class="col-md-3 col-form-label">연락처 변경</label>
                          <input type="text" class="form-control input-full" th:field="*{phone}">
                        </div>  
                        <div class="form-group">
                          <label for="exampleFormControlSelect1">직급 변경</label>
                          <select class="form-select" th:field="*{positionCode}">
                            <option value="a1">사장</option>
                            <option value="a2">관리자</option>
                            <option value="a3">본부장</option>
                            <option value="a4">팀장</option>
                            <option value="a5">사원</option>
                            <option value="a6">인턴</option>
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="exampleFormControlSelect1">부서 변경</label>
                          <select class="form-select" th:field="*{departmentNo}">
                            <th:block th:each="info : ${departments}">
                              <option th:value="${info.departmentNo}">[[${info.departmentName}]]</option>
                            </th:block> 
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="exampleFormControlSelect1">입사일 변경</label>
                          <input type="date"
                            id="hireDt"
                            name="hireDt"
                            th:value="${#dates.format(employee.hireDt, 'yyyy-MM-dd')}"
                            max="2050-01-01"
                            min="2000-01-01"
                            >
                        </div>
                        <div class="form-group">
                          <label for="exampleFormControlFile1">사진수정</label>
                          <input type="file" name="uploadFile" class="form-control-file" id="uploadFile">
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="card card-post card-round">
                          <img id="empImg" class="card-img-top" alt="사원 이미지">
                          <div class="card-body">
                            <div class="d-flex">
                              <div class="info-post ms-2">
                                <p class="username">[[${employeePositionName}]]</p>
                                <p class="date text-muted">[[${employee.name}]]</p>
                              </div>
                            </div>
                            <div class="separator-solid"></div>
                            <h3 class="card-title">
                              [[${employee.departmentName}]]
                            </h3>
                            <p class="card-text">
                               입사일 : [[${#dates.format(employee.hireDt, 'yyyy-MM-dd')}]]<br>
                               [[${employee.phone}]] <br>
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="card-action">
                    <button type="button" id="addEmployee" class="btn btn-success">수정하기</button>
                  </div>
                </form>
              </div>
            </div>
<script>

const imgLink = $('input[name=imageLink]').val();
$('#empImg').attr({src: "/upload/"+imgLink});
</script>